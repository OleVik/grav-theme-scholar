{% set collection = page.evaluate([{'@page.descendants': page.route}]) %}

{#
Object-dodging:
https://github.com/anseki/leader-line/issues/52
https://jsfiddle.net/gmtwpL16/
https://jsfiddle.net/bg7chnvf/

Page-manipulation:
https://github.com/rockettheme/toolbox/blob/develop/ArrayTraits/src/NestedArrayAccess.php
https://discourse.getgrav.org/t/grav-common-page-header-class/273
#}
{# {% set page = attribute(page, header, {'metadata': 'value'}) %} #}
{# {% set page.header.data.links_to = ["/sequence/prinsipper/juss"] %} #}
{# {{ dump(header) }} #}
{# {{ dump(page.extra) }} #}
{# {{ dump(page.frontmatter) }} #}
{# {{ page.header.set('metadata.some.nested', 'value') }} #}
{# {% set page.header() = {'metadata.some.nested': 'value'} %} #}
{# {% set page = page|merge({'header': {'metadata': 'value'}}) %} #}
{# {% set page = set('header.metadata', 'value') %} #}
{# {{ dump(page) }} #}
<section role="list">
{% include 'partials/sequence/item.html.twig' with {'page': page, 'next': next, 'index': index, 'level': 'h2'} %}
{% if collection|length > 0 %}
    {% for item in collection %}
        {% set next = collection.prevSibling(item.path) %}
        {% include 'partials/sequence/item.html.twig' with {'page': item, 'next': next, 'index': index ~ '.' ~ loop.index, 'level': 'h3'} %}
    {% endfor %}
{% endif %}
</section>